(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{43:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var r=a(1),s=a.n(r),c=a(20),n=a.n(c),i=(a(43),a(3)),o=a.n(i),u=a(6),l=a(10),j=a(11),d={LOGIN:"LOGIN",GET_TOKEN:"GET_TOKEN",GET_USER:"GET_USER",GET_ALL_USERS:"GET_ALL_USERS"},b=a(5),p=a.n(b),O=function(){return{type:d.LOGIN}},h=function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/user/infor",{headers:{Authorization:t}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=a(0);var f=function(){var e=Object(j.c)((function(e){return e.auth})),t=e.user,a=e.isLogged,r=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("/user/logout");case 3:localStorage.removeItem("firstLogin"),window.location.href="/",e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),window.location.href="/";case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s={transform:a?"transformY(-5px)":0};return Object(m.jsxs)("header",{children:[Object(m.jsx)("div",{className:"logo",children:Object(m.jsx)("h2",{children:Object(m.jsx)(l.b,{className:"link",to:"/",children:"Chinesepedia"})})}),Object(m.jsxs)("ul",{style:s,children:[Object(m.jsx)("li",{children:Object(m.jsx)(l.b,{className:"link",to:"/words",children:"Word List"})}),a?Object(m.jsxs)("li",{className:"drop-nav",children:[Object(m.jsxs)(l.b,{to:"#",className:"link avatar",children:[Object(m.jsx)("img",{style:{margin:"5px"},src:t.avatar,alt:""})," ",t.name," ",Object(m.jsx)("i",{className:"fa fa-angle-down"})]}),Object(m.jsxs)("ul",{className:"dropdown",children:[Object(m.jsx)("li",{children:Object(m.jsx)(l.b,{className:"link",to:"/profile",children:"Profile"})}),Object(m.jsx)("li",{children:Object(m.jsx)(l.b,{className:"link",to:"/",onClick:r,children:"Logout"})})]})]}):Object(m.jsx)("li",{children:Object(m.jsxs)(l.b,{className:"link",to:"/login",children:[Object(m.jsx)("i",{className:"fa fa-user"})," Sign in"]})})]})]})},x=a(9),v=a(8),g=a(2),w=a(7),k=(a(69),function(e){return Object(m.jsx)("div",{className:"errMsg",children:e})}),_=function(e){return Object(m.jsx)("div",{className:"successMsg",children:e})},y=a(37),N=a(38),E=a.n(N),S={email:"",password:"",err:"",success:""};var L=function(){var e=Object(r.useState)(S),t=Object(w.a)(e,2),a=t[0],s=t[1],c=Object(j.b)(),n=Object(x.f)(),i=a.email,d=a.password,b=a.err,h=a.success,f=function(e){var t,r=e.target,c=r.name,n=r.value;s(Object(g.a)(Object(g.a)({},a),{},(t={},Object(v.a)(t,c,n),Object(v.a)(t,"err",""),Object(v.a)(t,"success",""),t)))},N=function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,p.a.post("/user/login",{email:i,password:d});case 4:r=e.sent,s(Object(g.a)(Object(g.a)({},a),{},{err:"",success:r.data.msg})),localStorage.setItem("firstLogin",!0),c(O()),n.push("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.response.data.msg&&s(Object(g.a)(Object(g.a)({},a),{},{err:e.t0.response.data.msg,success:""}));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/user/google_login",{tokenId:t.tokenId});case 3:r=e.sent,s(Object(g.a)(Object(g.a)({},a),{},{error:"",success:r.data.msg})),localStorage.setItem("firstLogin",!0),c(O()),n.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.response.data.msg&&s(Object(g.a)(Object(g.a)({},a),{},{err:e.t0.response.data.msg,success:""}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(o.a.mark((function e(t){var r,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.accessToken,i=t.userID,e.next=4,p.a.post("/user/facebook_login",{accessToken:r,userID:i});case 4:u=e.sent,s(Object(g.a)(Object(g.a)({},a),{},{error:"",success:u.data.msg})),localStorage.setItem("firstLogin",!0),c(O()),n.push("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),e.t0.response.data.msg&&s(Object(g.a)(Object(g.a)({},a),{},{err:e.t0.response.data.msg,success:""}));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"login_page",children:[Object(m.jsx)("h2",{children:"Login"}),b&&k(b),h&&_(h),Object(m.jsxs)("form",{onSubmit:N,children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"email",children:"Email Address"}),Object(m.jsx)("input",{type:"text",placeholder:"Enter email address",id:"email",value:i,name:"email",onChange:f})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"password",children:"Password"}),Object(m.jsx)("input",{type:"password",placeholder:"Enter password",id:"password",value:d,name:"password",onChange:f})]}),Object(m.jsxs)("div",{className:"row",children:[Object(m.jsx)("button",{type:"submit",children:"Login"}),Object(m.jsx)(l.b,{className:"forgot",to:"/forgot_password",children:"Forgot your password?"})]})]}),Object(m.jsx)("div",{className:"hr",children:"Or Login With"}),Object(m.jsxs)("div",{className:"social",children:[Object(m.jsx)(y.GoogleLogin,{clientId:"377811483468-51d72d4gclrafi3bcmo7tr84s7osaliv.apps.googleusercontent.com",buttonText:"Login with google",onSuccess:L,cookiePolicy:"single_host_origin"}),Object(m.jsx)(E.a,{appId:"774435186809578",autoLoad:!1,fields:"name,email,picture",callback:C})]}),Object(m.jsxs)("p",{children:["New user? ",Object(m.jsx)(l.b,{to:"/register",children:"Register"})]})]})},C=function(e){return!e},A=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},F=function(e){return e.length<6},T=function(e,t){return e===t},I={name:"",email:"",password:"",cf_password:"",err:"",success:""};var P=function(){var e=Object(r.useState)(I),t=Object(w.a)(e,2),a=t[0],s=t[1],c=a.name,n=a.email,i=a.password,j=a.cf_password,d=a.err,b=a.success,O=function(e){var t,r=e.target,c=r.name,n=r.value;s(Object(g.a)(Object(g.a)({},a),{},(t={},Object(v.a)(t,c,n),Object(v.a)(t,"err",""),Object(v.a)(t,"success",""),t)))},h=function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!C(c)&&!C(i)){e.next=3;break}return e.abrupt("return",s(Object(g.a)(Object(g.a)({},a),{},{err:"Please fill in all fields.",success:""})));case 3:if(A(n)){e.next=5;break}return e.abrupt("return",s(Object(g.a)(Object(g.a)({},a),{},{err:"Invalid email.",success:""})));case 5:if(!F(i)){e.next=7;break}return e.abrupt("return",s(Object(g.a)(Object(g.a)({},a),{},{err:"Password must be at least 6 characters.",success:""})));case 7:if(T(i,j)){e.next=9;break}return e.abrupt("return",s(Object(g.a)(Object(g.a)({},a),{},{err:"Password did not match.",success:""})));case 9:return e.prev=9,e.next=12,p.a.post("/user/register",{name:c,email:n,password:i});case 12:r=e.sent,s(Object(g.a)(Object(g.a)({},a),{},{err:"",success:r.data.msg})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),e.t0.response.data.msg&&s(Object(g.a)(Object(g.a)({},a),{},{err:e.t0.response.data.msg,success:""}));case 19:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"login_page",children:[Object(m.jsx)("h2",{children:"Register"}),d&&k(d),b&&_(b),Object(m.jsxs)("form",{onSubmit:h,children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"name",children:"Name"}),Object(m.jsx)("input",{type:"text",placeholder:"Enter your name",id:"name",value:c,name:"name",onChange:O})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"email",children:"Email Address"}),Object(m.jsx)("input",{type:"text",placeholder:"Enter email address",id:"email",value:n,name:"email",onChange:O})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"password",children:"Password"}),Object(m.jsx)("input",{type:"password",placeholder:"Enter password",id:"password",value:i,name:"password",onChange:O})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{htmlFor:"cf_password",children:"Confirm password"}),Object(m.jsx)("input",{type:"password",placeholder:"Confirm password",id:"cf_password",value:j,name:"cf_password",onChange:O})]}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("button",{type:"submit",children:"Register"})})]}),Object(m.jsxs)("p",{children:["Already have an account? ",Object(m.jsx)(l.b,{to:"/login",children:"Login"})]})]})};var G=function(){var e=Object(x.g)().activation_token,t=Object(r.useState)(""),a=Object(w.a)(t,2),s=a[0],c=a[1],n=Object(r.useState)(""),i=Object(w.a)(n,2),l=i[0],j=i[1];return Object(r.useEffect)((function(){e&&function(){var t=Object(u.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.post("/user/activation",{activation_token:e});case 3:a=t.sent,j(a.data.msg),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0.response.data.msg&&c(t.t0.response.data.msg);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()()}),[e]),Object(m.jsxs)("div",{className:"active_page",children:[s&&k(s),l&&_(l)]})};var U=function(){return Object(m.jsx)("div",{children:"404 | Not Found"})},R={email:"",err:"",success:""};var z=function(){var e=Object(r.useState)(R),t=Object(w.a)(e,2),a=t[0],s=t[1],c=a.email,n=a.err,i=a.success,l=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A(c)){e.next=2;break}return e.abrupt("return",s(Object(g.a)(Object(g.a)({},a),{},{err:"Invalid email.",success:""})));case 2:return e.prev=2,e.next=5,p.a.post("/user/forgot",{email:c});case 5:return t=e.sent,e.abrupt("return",s(Object(g.a)(Object(g.a)({},a),{},{err:"",success:t.data.msg})));case 9:e.prev=9,e.t0=e.catch(2),e.t0.response.data.msg&&s(Object(g.a)(Object(g.a)({},a),{},{err:e.t0.response.data.msg,success:""}));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"fg_pass",children:[Object(m.jsx)("h2",{children:"Forgot your password?"}),Object(m.jsxs)("div",{className:"roww",children:[n&&k(n),i&&_(i),Object(m.jsx)("label",{htmlFor:"email",children:"Enter your email address"}),Object(m.jsx)("input",{type:"email",name:"email",id:"email",value:c,onChange:function(e){var t,r=e.target,c=r.name,n=r.value;s(Object(g.a)(Object(g.a)({},a),{},(t={},Object(v.a)(t,c,n),Object(v.a)(t,"err",""),Object(v.a)(t,"success",""),t)))}}),Object(m.jsx)("button",{onClick:l,children:"Verify your email"})]})]})},D={password:"",cf_password:"",err:"",success:""};var V=function(){var e=Object(r.useState)(D),t=Object(w.a)(e,2),a=t[0],s=t[1],c=Object(x.g)().token,n=a.password,i=a.cf_password,l=a.err,j=a.success,d=function(e){var t,r=e.target,c=r.name,n=r.value;s(Object(g.a)(Object(g.a)({},a),{},(t={},Object(v.a)(t,c,n),Object(v.a)(t,"err",""),Object(v.a)(t,"success",""),t)))},b=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F(n)){e.next=2;break}return e.abrupt("return",s(Object(g.a)(Object(g.a)({},a),{},{err:"Password must be at least 6 characters.",success:""})));case 2:if(T(n,i)){e.next=4;break}return e.abrupt("return",s(Object(g.a)(Object(g.a)({},a),{},{err:"Password did not match.",success:""})));case 4:return e.prev=4,e.next=7,p.a.post("/user/reset",{password:n},{headers:{Authorization:c}});case 7:return t=e.sent,e.abrupt("return",s(Object(g.a)(Object(g.a)({},a),{},{err:"",success:t.data.msg})));case 11:e.prev=11,e.t0=e.catch(4),e.t0.response.data.msg&&s(Object(g.a)(Object(g.a)({},a),{},{err:e.t0.response.data.msg,success:""}));case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"fg_pass",children:[Object(m.jsx)("h2",{children:"Reset Your Password"}),Object(m.jsxs)("div",{className:"roww",children:[l&&k(l),j&&_(j),Object(m.jsx)("label",{htmlFor:"password",children:"Password"}),Object(m.jsx)("input",{type:"password",name:"password",id:"password",value:n,onChange:d}),Object(m.jsx)("label",{htmlFor:"cf_password",children:"Confirm Password"}),Object(m.jsx)("input",{type:"password",name:"cf_password",id:"cf_password",value:i,onChange:d}),Object(m.jsx)("button",{onClick:b,children:"Reset Password"})]})]})},K=function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/user/all_infor",{headers:{Authorization:t}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X={name:"",password:"",cf_password:"",err:"",success:""};var Y=function(){var e=Object(j.c)((function(e){return e.auth})),t=Object(j.c)((function(e){return e.token})),a=Object(j.c)((function(e){return e.users})),s=e.user,c=e.isAdmin,n=Object(r.useState)(X),i=Object(w.a)(n,2),b=i[0],O=i[1],h=b.name,f=b.password,x=b.cf_password,y=b.err,N=b.success,E=Object(r.useState)(!1),S=Object(w.a)(E,2),L=S[0],C=S[1],A=Object(r.useState)(!1),I=Object(w.a)(A,2),P=I[0],G=I[1],U=Object(r.useState)(!1),R=Object(w.a)(U,2),z=R[0],D=R[1],V=Object(j.b)();Object(r.useEffect)((function(){c&&K(t).then((function(e){V(function(e){return{type:d.GET_ALL_USERS,payload:e.data}}(e))}))}),[t,c,V,z]);var Y=function(e){var t,a=e.target,r=a.name,s=a.value;O(Object(g.a)(Object(g.a)({},b),{},(t={},Object(v.a)(t,r,s),Object(v.a)(t,"err",""),Object(v.a)(t,"success",""),t)))},B=function(){var e=Object(u.a)(o.a.mark((function e(a){var r,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),e.prev=1,r=a.target.files[0]){e.next=5;break}return e.abrupt("return",O(Object(g.a)(Object(g.a)({},b),{},{err:"No files were uploaded.",success:""})));case 5:if(!(r.size>1048576)){e.next=7;break}return e.abrupt("return",O(Object(g.a)(Object(g.a)({},b),{},{err:"Size too large.",success:""})));case 7:if("image/jpeg"===r.type||"image/png"===r.type){e.next=9;break}return e.abrupt("return",O(Object(g.a)(Object(g.a)({},b),{},{err:"File format is incorrect.",success:""})));case 9:return(s=new FormData).append("file",r),G(!0),e.next=14,p.a.post("/api/upload_avatar",s,{headers:{"content-type":"multipart/form-data",Authorization:t}});case 14:c=e.sent,G(!1),C(c.data.url),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),O(Object(g.a)(Object(g.a)({},b),{},{err:e.t0.response.data.msg,success:""}));case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s._id===a){e.next=8;break}if(!window.confirm("Are you sure you want to delete this account?")){e.next=8;break}return G(!0),e.next=6,p.a.delete("/user/delete/".concat(a),{headers:{Authorization:t}});case 6:G(!1),D(!z);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),O(Object(g.a)(Object(g.a)({},b),{},{err:e.t0.response.data.msg,success:""}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{children:[y&&k(y),N&&_(N),P&&Object(m.jsx)("h3",{children:"Loading....."})]}),Object(m.jsxs)("div",{className:"profile_page",children:[Object(m.jsxs)("div",{className:"col-left",children:[Object(m.jsx)("h2",{children:c?"Admin Profile":"User Profile"}),Object(m.jsxs)("div",{className:"avatar",children:[Object(m.jsx)("img",{src:L||s.avatar,alt:""}),Object(m.jsxs)("span",{children:[Object(m.jsx)("i",{className:"fa fa-camera"}),Object(m.jsx)("p",{children:"Change"}),Object(m.jsx)("input",{type:"file",name:"file",id:"file_up",onChange:B})]})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"name",children:"Name"}),Object(m.jsx)("input",{type:"text",name:"name",id:"name",defaultValue:s.name,placeholder:"Your name",onChange:Y})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"email",children:"Email"}),Object(m.jsx)("input",{type:"email",name:"email",id:"email",defaultValue:s.email,placeholder:"Your email address",disabled:!0})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"password",children:"New Password"}),Object(m.jsx)("input",{type:"password",name:"password",id:"password",placeholder:"Your password",value:f,onChange:Y})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"cf_password",children:"Confirm New Password"}),Object(m.jsx)("input",{type:"password",name:"cf_password",id:"cf_password",placeholder:"Confirm password",value:x,onChange:Y})]}),Object(m.jsx)("div",{children:Object(m.jsx)("em",{style:{color:"crimson"},children:"* If you update your password here, you will not be able to login quickly using google and facebook."})}),Object(m.jsx)("button",{disabled:P,onClick:function(){(h||L)&&function(){try{p.a.patch("/user/update",{name:h||s.name,avatar:L||s.avatar},{headers:{Authorization:t}}),O(Object(g.a)(Object(g.a)({},b),{},{err:"",success:"Updated Success!"}))}catch(y){O(Object(g.a)(Object(g.a)({},b),{},{err:y.response.data.msg,success:""}))}}(),f&&function(){if(F(f))return O(Object(g.a)(Object(g.a)({},b),{},{err:"Password must be at least 6 characters.",success:""}));if(!T(f,x))return O(Object(g.a)(Object(g.a)({},b),{},{err:"Password did not match.",success:""}));try{p.a.post("/user/reset",{password:f},{headers:{Authorization:t}}),O(Object(g.a)(Object(g.a)({},b),{},{err:"",success:"Updated Success!"}))}catch(y){O(Object(g.a)(Object(g.a)({},b),{},{err:y.response.data.msg,success:""}))}}()},children:"Update"})]}),Object(m.jsxs)("div",{className:"col-right",children:[Object(m.jsx)("h2",{children:c?"Users":"My Stats"}),Object(m.jsxs)("div",{style:{overflowX:"auto"},children:[Object(m.jsx)("h6",{children:c?"":"Frequency List Count"}),Object(m.jsx)("h6",{children:c?"":"HSK Count"}),Object(m.jsxs)("table",{className:"customers",children:[c?Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"ID"}),Object(m.jsx)("th",{children:"Name"}),Object(m.jsx)("th",{children:"Email"}),Object(m.jsx)("th",{children:"Admin"}),Object(m.jsx)("th",{children:"Action"})]})}):"",Object(m.jsx)("tbody",{children:a.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:e._id}),Object(m.jsx)("td",{children:e.name}),Object(m.jsx)("td",{children:e.email}),Object(m.jsx)("td",{children:1===e.role?Object(m.jsx)("i",{className:"fa fa-check",title:"Admin"}):Object(m.jsx)("i",{className:"fa fa-times",title:"User"})}),Object(m.jsxs)("td",{children:[Object(m.jsx)(l.b,{to:"/edit_user/".concat(e._id),children:Object(m.jsx)("i",{className:"fa fa-edit",title:"Edit"})}),Object(m.jsx)("i",{className:"fa fa-trash",title:"Remove",onClick:function(){return M(e._id)}})]})]},e._id)}))})]})]})]})]})]})};var B=function(){var e=Object(x.g)().id,t=Object(x.f)(),a=Object(r.useState)([]),s=Object(w.a)(a,2),c=s[0],n=s[1],i=Object(j.c)((function(e){return e.users})),l=Object(j.c)((function(e){return e.token})),d=Object(r.useState)(!1),b=Object(w.a)(d,2),O=b[0],h=b[1],f=Object(r.useState)(!1),v=Object(w.a)(f,2),g=v[0],y=v[1],N=Object(r.useState)(!1),E=Object(w.a)(N,2),S=E[0],L=E[1],C=Object(r.useState)(0),A=Object(w.a)(C,2),F=A[0],T=A[1];Object(r.useEffect)((function(){0!==i.length?i.forEach((function(t){t._id===e&&(n(t),h(1===t.role))})):t.push("/profile")}),[i,e,t]);var I=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,F%2===0){e.next=7;break}return e.next=4,p.a.patch("/user/update_role/".concat(c._id),{role:O?1:0},{headers:{Authorization:l}});case 4:t=e.sent,L(t.data.msg),T(0);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response.data.msg&&y(e.t0.response.data.msg);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"profile_page edit_user",children:[Object(m.jsx)("div",{className:"roww",children:Object(m.jsxs)("button",{onClick:function(){return t.goBack()},className:"go_back",children:[Object(m.jsx)("i",{className:"fa fa-long-arrow-left"})," Go Back"]})}),Object(m.jsxs)("div",{className:"col-left",children:[Object(m.jsx)("h2",{children:"Edit User"}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"name",children:"Name"}),Object(m.jsx)("input",{type:"text",name:"name",defaultValue:c.name,disabled:!0})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"email",children:"Email"}),Object(m.jsx)("input",{type:"email",name:"email",defaultValue:c.email,disabled:!0})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("input",{type:"checkbox",id:"isAdmin",checked:O,onChange:function(){L(""),y(""),h(!O),T(F+1)}}),Object(m.jsx)("label",{htmlFor:"isAdmin",children:"isAdmin"})]}),Object(m.jsx)("button",{onClick:I,children:"Update"}),g&&k(g),S&&_(S)]})]})};var M=function(){return Object(m.jsx)("div",{children:"Welcome to Chinesepedia!"})};var W=function(){var e=Object(j.c)((function(e){return e.auth})),t=e.isLogged,a=e.isAdmin;return Object(m.jsx)("section",{children:Object(m.jsxs)(x.c,{children:[Object(m.jsx)(x.a,{path:"/",component:M,exact:!0}),Object(m.jsx)(x.a,{path:"/login",component:t?U:L,exact:!0}),Object(m.jsx)(x.a,{path:"/register",component:t?U:P,exact:!0}),Object(m.jsx)(x.a,{path:"/forgot_password",component:t?U:z,exact:!0}),Object(m.jsx)(x.a,{path:"/user/reset/:token",component:t?U:V,exact:!0}),Object(m.jsx)(x.a,{path:"/user/activate/:activation_token",component:G,exact:!0}),Object(m.jsx)(x.a,{path:"/profile",component:t?Y:U,exact:!0}),Object(m.jsx)(x.a,{path:"/edit_user/:id",component:a?B:U,exact:!0})]})})};var q=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.token})),a=Object(j.c)((function(e){return e.auth}));return Object(r.useEffect)((function(){localStorage.getItem("firstLogin")&&function(){var t=Object(u.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.post("/user/refresh_token",null);case 2:a=t.sent,e({type:"GET_TOKEN",payload:a.data.accessToken});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[a.isLogged,e]),Object(r.useEffect)((function(){if(t){e(O()),h(t).then((function(t){e(function(e){return{type:d.GET_USER,payload:{user:e.data,isAdmin:1===e.data.role}}}(t))}))}}),[t,e]),Object(m.jsx)(l.a,{children:Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(f,{}),Object(m.jsx)(W,{})]})})},J=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,71)).then((function(t){var a=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,n=t.getTTFB;a(e),r(e),s(e),c(e),n(e)}))},Z=a(18),H={user:[],isLogged:!1,isAdmin:!1},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.LOGIN:return Object(g.a)(Object(g.a)({},e),{},{isLogged:!0});case d.GET_USER:return Object(g.a)(Object(g.a)({},e),{},{user:t.payload.user,isAdmin:t.payload.isAdmin});default:return e}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.GET_TOKEN:return t.payload;default:return e}},ee=[],te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.GET_ALL_USERS:return t.payload;default:return e}},ae=Object(Z.b)({auth:$,token:Q,users:te}),re=Object(Z.c)(ae,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());var se=function(e){var t=e.children;return Object(m.jsx)("div",{children:Object(m.jsx)(j.a,{store:re,children:t})})};n.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(se,{children:Object(m.jsx)(q,{})})}),document.getElementById("root")),J()}},[[70,1,2]]]);
//# sourceMappingURL=main.d8668898.chunk.js.map